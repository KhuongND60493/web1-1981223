const reCaptchaKey="6Lcrb8EpAAAAAI4c3yBKYGtTsS0kfJQfCQs0h7Ob",HOST="https://web1-api.vercel.app",keyAccessToken="1981223_ACCESSTOKEN",BASE_URL=HOST+"/api",api={products:BASE_URL+"/products",news:BASE_URL+"/news",aboutus:BASE_URL+"/aboutus",visions:BASE_URL+"/visions",team:BASE_URL+"/team",testimonials:BASE_URL+"/testimonials",login:HOST+"/users/authenticate",verifyAuthentication:HOST+"/users/verify",sendMail:HOST+"/users/send",sendBlogComment:HOST+"/users/comment",search:BASE_URL+"/search?keyword="},templates={productListTemplate:"products-template",newsListTemplate:"news-template",aboutUsTemplate:"aboutus-template",visionsListTemplate:"our-vision-template",ourTeamListTemplate:"our-team-template",testimonialsListTemplate:"testimonials-template"},views={productSection:"section-products",newsSection:"section-news",aboutSection:"section-aboutus",visionSection:"section-our-vision",ourTeamSection:"section-our-team",testimonialsSection:"section-testimonials"};async function getProducts(){const res=await fetch(api.products),data=await res.json();var template,context,html=(0,Handlebars.templates[templates.productListTemplate+".hbs"])({data:data});document.getElementById(views.productSection).innerHTML=html}async function getNews(){const res=await fetch(api.news),data=await res.json();var template,context,html=(0,Handlebars.templates[templates.newsListTemplate+".hbs"])({data:data});document.getElementById(views.newsSection).innerHTML=html}async function getAboutUs(){const res=await fetch(api.aboutus),data=await res.json();var template,context,html=(0,Handlebars.templates[templates.aboutUsTemplate+".hbs"])({data:data});document.getElementById(views.aboutSection).innerHTML=html}async function getOurTeams(){const res=await fetch(api.team),data=await res.json();var template,context,html=(0,Handlebars.templates[templates.ourTeamListTemplate+".hbs"])({data:data});document.getElementById(views.ourTeamSection).innerHTML=html}async function getVisions(){const res=await fetch(api.visions),data=await res.json();var template,context,html=(0,Handlebars.templates[templates.visionsListTemplate+".hbs"])({data:data});document.getElementById(views.visionSection).innerHTML=html}async function getTestimonials(){const res=await fetch(api.testimonials),data=await res.json();var template,context,html=(0,Handlebars.templates[templates.testimonialsListTemplate+".hbs"])({data:data});document.getElementById(views.testimonialsSection).innerHTML=html}async function getList(subUrl,idTemplate,idSection){const res=await fetch(`${BASE_URL}/${subUrl}`),data=await res.json();var template,context,html=(0,Handlebars.templates[idTemplate+".hbs"])({data:data});document.getElementById(idSection).innerHTML=html}async function getListBlogs(subUrl,idTemplate,idSection,page=null){const res=await fetch(`${BASE_URL}/${subUrl}`),data=await res.json(),blogs=data.data||[],currentPage=page?parseInt(""+page):1;var template,context,html=(0,Handlebars.templates[idTemplate+".hbs"])({data:blogs,currentPage:currentPage,pageCount:data.pageCount||0});document.getElementById(idSection).innerHTML=html}async function handleLoadReadMore(urlGetById,idTemplate,idView){const res=await fetch(`${BASE_URL}/${urlGetById}`),data=await res.json();var template,context,html=(0,Handlebars.templates[idTemplate+".hbs"])({data:data});document.getElementById(idView).innerHTML=html}function handleToggleImage(self,imagePath,isHover=!0){self.src=isHover?imagePath.replace(".","-active."):imagePath.replace("-active.","."),self.nextElementSibling.classList.toggle("web1-text-blue")}async function getAuthenticateToken(username,password){const res=await fetch(api.login,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:username,password:password})}),rs=await res.json();if(200==res.status)return rs.token;throw Error(rs.message)}function reCaptcha(fnCbSuccess,fnCbError){grecaptcha.enterprise.ready(async()=>{const token=await grecaptcha.enterprise.execute(reCaptchaKey,{action:"submit"});let response;200==(await fetch("verify.php",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({"g-token":token})})).status?fnCbSuccess&&fnCbSuccess():fnCbError&&fnCbError()})}async function sendMail(postData,token,fnCbSuccess,fnCbError){const response=await fetch(api.sendMail,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+token},body:JSON.stringify(postData)}),rs=await response.json();200==response.status?fnCbSuccess&&fnCbSuccess(rs.message):fnCbError&&fnCbError(rs.message)}function onLogin(e){e.preventDefault();let notiMsg=document.getElementById("errorMessage");login(document.getElementById("username").value,document.getElementById("password").value,(function(msg){showLoginLogoutLink(!0),document.getElementsByClassName("btn-close")[0].click()}),(function(msg){notiMsg.innerHTML=msg,notiMsg.className="text-danger"}))}async function login(username,password,fnCbSuccess,fnCbError){try{const response=undefined;saveAccessToken(await getAuthenticateToken(username,password)),fnCbSuccess&&fnCbSuccess("login successfully")}catch(error){fnCbError&&fnCbError(error)}}async function verifyAuthentication(){const token=getAccessToken();if(token)try{const res=await fetch(api.verifyAuthentication,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+token}}),rs=await res.json();200==res.status?showLoginLogoutLink(!0):(localStorage.clear(),showLoginLogoutLink(!1))}catch(error){showLoginLogoutLink(!1),localStorage.clear()}else localStorage.clear(),showLoginLogoutLink(!1)}function logout(){localStorage.clear(),showLoginLogoutLink(!1)}function saveAccessToken(token){localStorage.setItem(keyAccessToken,token)}function getAccessToken(){return localStorage.getItem(keyAccessToken)}function showCommens(){showLoginLogoutLink(null!=getAccessToken())}function showLoginLogoutLink(isLoginned=!1){let linksLogin=document.getElementsByClassName("linkLogin"),linksLogout=document.getElementsByClassName("linkLogout"),leaveComments=document.getElementById("leave-comments"),displayLogin="block",displayLogout="none";isLoginned&&(displayLogin="none",displayLogout="block");for(let i=0;i<linksLogin.length;i++)linksLogin[i].style.display=displayLogin,linksLogout[i].style.display=displayLogout;leaveComments&&(leaveComments.style.display=displayLogout)}async function sendBlogComment(postData,fnCbSuccess,fnCbError){const response=await fetch(api.sendBlogComment,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+getAccessToken()},body:JSON.stringify(postData)}),rs=await response.json();200==response.status?fnCbSuccess&&fnCbSuccess(rs.message):fnCbError&&fnCbError(rs.message)}async function searchWithKeyword(keyword,idTemplate,idSection){const res=await fetch(`${api.search}${keyword}`),results=await res.json();var template,context,html=(0,Handlebars.templates[idTemplate+".hbs"])({data:results});document.getElementById(idSection).innerHTML=html}